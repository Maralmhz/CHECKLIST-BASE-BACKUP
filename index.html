<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <meta name="description" content="Checklist de Oficina Fast Car - App Offline com PDF">
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="logo.png">
    <link rel="icon" type="image/png" href="logo.png">
   <title id="titulo-pagina">Checklist de Entrada â€“ Oficina</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
    <div class="container">
       <div class="header">
    <div class="logo-container">
        <img id="logo-oficina" src="logo.png" alt="Logo da Oficina">
    </div>
    <div class="header-content">
        <h1 id="nome-oficina">Fast Car Centro Automotivo</h1>
        <p id="subtitulo-oficina">Checklist de entrada e inspeÃ§Ã£o veicular</p>
        <div class="contato-info">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" class="whatsapp-icon">
            <span id="telefone-oficina">(31) 99457-9274</span>
        </div>
        <div class="endereco-oficina" id="endereco-oficina">
            Av. RÃ©gulus, 248 - Jardim Riacho das Pedras, Contagem - MG, 32241-210 Â· Tel: (31) 2342-1699
        </div>

                <div class="status-sync">
                    <div class="sync-dot" id="syncStatus"></div>
                    <span id="syncText">Online</span>
                </div>
            </div>
            <div class="header-badge">v3.0 PRO</div>
        </div>
<div class="tabs">
    <button class="tab-button active" onclick="switchTab('novo-checklist')">âž• Novo Checklist</button>
    <button class="tab-button" onclick="switchTab('orcamento')">ðŸ’° PeÃ§as & ServiÃ§os</button>
    <button class="tab-button" onclick="switchTab('fotos')">ðŸ“¸ Fotos</button>
    <button class="tab-button" onclick="switchTab('historico')">ðŸ“‹ HistÃ³rico</button>
    <button class="tab-button" onclick="switchTab('relatorios')">ðŸ“Š RelatÃ³rios</button>
</div>


        <!-- ABA PRINCIPAL - CHECKLIST -->
        <div id="novo-checklist" class="tab-content active">
            <div class="content">
                <div id="successMessage" class="alert alert-success"></div>
                <div id="errorMessage" class="alert alert-error"></div>
                <div id="infoMessage" class="alert alert-info"></div>

                <form id="checklistForm">
                    <div class="section-title">ðŸ“‹ INFORMAÃ‡Ã•ES DO VEÃCULO</div>

                    <!-- RESUMO FIXO DO VEÃCULO (VISUAL) -->
                    <div class="veiculo-resumo" id="resumoVeiculoPrincipal">
                        <div class="veiculo-resumo-pill">Placa: <strong id="resumoPlaca">-</strong></div>
                        <div class="veiculo-resumo-pill">Modelo: <strong id="resumoModelo">-</strong></div>
                        <div class="veiculo-resumo-pill">Chassi: <strong id="resumoChassi">-</strong></div>
                        <div class="veiculo-resumo-pill">KM Entrada: <strong id="resumoKmEntrada">-</strong></div>
                        <div class="veiculo-resumo-pill">Data Entrada: <strong id="resumoData">-</strong></div>
                        <div class="veiculo-resumo-pill">Hora Entrada: <strong id="resumoHora">-</strong></div>
                        <div class="veiculo-resumo-pill">CombustÃ­vel: <strong id="resumoCombustivel">-</strong></div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="placa">Placa *</label>
                            <input type="text" id="placa" name="placa" placeholder="ABC-1234" maxlength="8" style="text-transform: uppercase;">
                        </div>
                        <div class="form-group">
                            <label for="chassi">Chassi</label>
                            <input type="text" id="chassi" name="chassi" placeholder="17 dÃ­gitos" maxlength="17">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="modelo">Modelo</label>
                            <input type="text" id="modelo" name="modelo" placeholder="Ex: Fiat Uno">
                        </div>
                        <div class="form-group">
                            <label for="km_entrada">KM Entrada</label>
                            <input type="text" id="km_entrada" name="km_entrada" placeholder="150.000">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="data">Data Entrada</label>
                            <input type="date" id="data" name="data">
                        </div>
                        <div class="form-group">
                            <label for="hora">Hora Entrada</label>
                            <input type="time" id="hora" name="hora">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="combustivel">NÃ­vel CombustÃ­vel</label>
                            <select id="combustivel" name="combustivel">
                                <option value="">Selecione...</option>
                                <option value="cheio">Cheio</option>
                                <option value="meio">Meio</option>
                                <option value="1/4">1/4</option>
                                <option value="vazio">Vazio</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="km_saida">KM SaÃ­da</label>
                            <input type="text" id="km_saida" name="km_saida" placeholder="150.500">
                        </div>
                    </div>

                    <div class="section-title">ðŸš— CARACTERÃSTICAS DO VEÃCULO</div>

                    <div class="equip-section">
                        <div class="equip-section-title">ðŸ”§ ACESSÃ“RIOS OBRIGATÃ“RIOS</div>
                        <div class="checkbox-group">
                            <div class="checkbox-item"><input type="checkbox" id="estepe" name="equipamentos" value="ESTEPE"><label for="estepe">ESTEPE</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="macaco" name="equipamentos" value="MACACO"><label for="macaco">MACACO</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="chave_roda" name="equipamentos" value="CHAVE DE RODA"><label for="chave_roda">CHAVE DE RODA</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="triangulo" name="equipamentos" value="TRIÃ‚NGULO"><label for="triangulo">TRIÃ‚NGULO</label></div>
                        </div>
                    </div>

<div class="equip-section">
    <div class="equip-section-title">â›½ TIPO COMBUSTÃVEL</div>
    <div class="checkbox-group">
        <div class="checkbox-item"><input type="checkbox" id="gasolina" name="equipamentos" value="GASOLINA"><label for="gasolina">GASOLINA</label></div>
        <div class="checkbox-item"><input type="checkbox" id="etanol" name="equipamentos" value="ETANOL"><label for="etanol">ETANOL</label></div>
        <div class="checkbox-item"><input type="checkbox" id="gnv" name="equipamentos" value="GNV"><label for="gnv">GNV</label></div>
        <div class="checkbox-item"><input type="checkbox" id="diesel" name="equipamentos" value="DIESEL"><label for="diesel">DIESEL</label></div>
    </div>
</div>



                    <div class="equip-section">
                        <div class="equip-section-title">ðŸ”Š ELETRÃ”NICOS</div>
                        <div class="checkbox-group">
                            <div class="checkbox-item"><input type="checkbox" id="radio" name="equipamentos" value="RÃDIO / MULTIMÃDIA"><label for="radio">RÃDIO / MULTIMÃDIA</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="alarme_corta" name="equipamentos" value="ALARME / CORTA CORRENTE"><label for="alarme_corta">ALARME / CORTA CORRENTE</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="antena" name="equipamentos" value="ANTENA"><label for="antena">ANTENA</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="acendedor" name="equipamentos" value="ACENDEDOR/TOMADA 12V"><label for="acendedor">ACENDEDOR/TOMADA 12V</label></div>
                        </div>
                    </div>

                    <div class="equip-section">
                        <div class="equip-section-title">âš¡ ELÃ‰TRICOS</div>
                        <div class="checkbox-group">
                            <div class="checkbox-item"><input type="checkbox" id="vidro_eletrico" name="equipamentos" value="VIDRO ELÃ‰TRICO"><label for="vidro_eletrico">VIDRO ELÃ‰TRICO</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="trava_eletrica" name="equipamentos" value="TRAVA ELÃ‰TRICA"><label for="trava_eletrica">TRAVA ELÃ‰TRICA</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="buzina" name="equipamentos" value="BUZINA"><label for="buzina">BUZINA</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="bateria" name="equipamentos" value="BATERIA"><label for="bateria">BATERIA</label></div>
                        </div>
                    </div>

                    <div class="equip-section">
                        <div class="equip-section-title">ðŸ›ž RODAS & PÃRA-BRISAS</div>
                        <div class="checkbox-group">
                            <div class="checkbox-item"><input type="checkbox" id="calotas" name="equipamentos" value="CALOTAS"><label for="calotas">CALOTAS</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="rodas_liga" name="equipamentos" value="RODAS DE LIGA"><label for="rodas_liga">RODAS DE LIGA</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="roda_ferro" name="equipamentos" value="RODA DE FERRO"><label for="roda_ferro">RODA DE FERRO</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="para_brisa" name="equipamentos" value="PARABRISA TRINCADO"><label for="para_brisa">PÃRA BRISA TRICADO</label></div>
                        </div>
                    </div>

                    <div class="equip-section">
    <div class="equip-section-title">ðŸ“¦ DEMAIS ACESSÃ“RIOS</div>
    <div class="checkbox-group">
        <div class="checkbox-item"><input type="checkbox" id="extintor" name="equipamentos" value="EXTINTOR"><label for="extintor">EXTINTOR</label></div>
        <div class="checkbox-item"><input type="checkbox" id="protetor_carter" name="equipamentos" value="PROTETOR DE CARTER"><label for="protetor_carter">PROTETOR DE CARTER</label></div>
        <div class="checkbox-item"><input type="checkbox" id="chave_secreta" name="equipamentos" value="CHAVE SEGREDO (RODA)"><label for="chave_secreta">CHAVE SEGREDO (RODA)</label></div>
        <div class="checkbox-item"><input type="checkbox" id="tapetes" name="equipamentos" value="TAPETES"><label for="tapetes">TAPETES</label></div>
    </div>
</div>


                    <div class="equip-section">
                        <div class="equip-section-title">â­ EQUIPAMENTOS PRINCIPAIS</div>
                        <div class="checkbox-group">
                            <div class="checkbox-item"><input type="checkbox" id="ar" name="caracteristicas" value="AR"><label for="ar">AR</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="abs" name="caracteristicas" value="ABS"><label for="abs">ABS</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="airbag" name="caracteristicas" value="Air Bag"><label for="airbag">Air Bag</label></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>CÃ¢mbio</label>
                            <div class="checkbox-group" style="margin-top: 5px;">
                                <div class="checkbox-item"><input type="checkbox" id="cambio_auto" name="cambio" value="AutomÃ¡tico"><label for="cambio_auto">AutomÃ¡tico</label></div>
                                <div class="checkbox-item"><input type="checkbox" id="cambio_manual" name="cambio" value="Manual"><label for="cambio_manual">Manual</label></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>TraÃ§Ã£o</label>
                            <div class="checkbox-group" style="margin-top: 5px;">
                                <div class="checkbox-item"><input type="checkbox" id="tracao_4x2" name="tracao" value="4x2"><label for="tracao_4x2">4x2</label></div>
                                <div class="checkbox-item"><input type="checkbox" id="tracao_4x4" name="tracao" value="4x4"><label for="tracao_4x4">4x4</label></div>
                            </div>
                        </div>
                    </div>

                    <div class="section-title">ðŸ‘¤ DADOS DO CLIENTE</div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome_cliente">Nome *</label>
                            <input type="text" id="nome_cliente" name="nome_cliente" placeholder="Nome completo do cliente">
                        </div>
                        <div class="form-group">
                            <label for="cpf_cnpj">CPF / CNPJ</label>
                            <input type="text" id="cpf_cnpj" name="cpf_cnpj" placeholder="000.000.000-00" maxlength="18">
                        </div>
                    </div>

                    <div class="form-row full">
                        <div class="form-group">
                            <label for="endereco_cliente">EndereÃ§o Completo</label>
                            <textarea id="endereco_cliente" name="endereco_cliente" placeholder="Rua, nÃºmero, bairro, cidade - UF, CEP" style="height: 60px; min-height: 60px;"></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="celular_cliente">Celular / WhatsApp *</label>
                            <input type="tel" id="celular_cliente" name="celular_cliente" placeholder="(31) 99999-9999">
                        </div>
                        <div class="form-group">
                            <label for="telefone2">Telefone 2 (opcional)</label>
                            <input type="tel" id="telefone2" name="telefone2" placeholder="(31) 9999-9999">
                        </div>
                    </div>

                    <div class="section-title">ðŸ”§ SERVIÃ‡OS/SOLICITADOS</div>

                    <div class="form-row full">
                        <div class="form-group">
                            <label for="servicos">Descreva os serviÃ§os solicitados:</label>
                            <textarea id="servicos" name="servicos" placeholder="Ex: Troca de Ã³leo e filtro, alinhamento e balanceamento..."></textarea>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button type="button" class="btn-success" onclick="gerarPDF()">ðŸ“„ Gerar PDF</button>
                        <button type="button" class="btn-secondary" onclick="limparFormulario()">ðŸ—‘ï¸ Limpar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ABA HISTÃ“RICO -->
        <div id="historico" class="tab-content">
            <div class="content">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="ðŸ” Buscar por placa, modelo ou cliente..." onkeyup="filtrarChecklists()">
                    <button class="btn-secondary btn-small" onclick="ordenarChecklists()">ðŸ“Š Ordenar</button>
                </div>

                <div id="checklistsList"></div>
                <div id="emptyMessage" style="text-align: center; padding: 40px; color: #999;">
                    <p style="font-size: 40px; margin-bottom: 10px;">ðŸ“­</p>
                    <p>Nenhum checklist salvo ainda. Crie um novo para comeÃ§ar!</p>
                </div>
            </div>
        </div>

        <!-- ABA RELATÃ“RIOS -->
        <div id="relatorios" class="tab-content">
            <div class="content">
                <div class="section-title">ðŸ“Š ESTATÃSTICAS GERAIS</div>
                <div class="stats-box">
                    <div class="stat-card">
                        <div class="stat-number" id="totalChecklists">0</div>
                        <div class="stat-label">Checklists Salvos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="checklistsMes">0</div>
                        <div class="stat-label">Checklists MÃªs Atual</div>
                    </div>
                </div>

                <div class="section-title">ðŸš— MARCAS MAIS ATENDIDAS</div>
                <div id="graficoMarcas" style="margin-top: 20px;"></div>

                <div class="action-buttons">
                    <button class="btn-primary" onclick="exportarDados()">ðŸ’¾ Exportar Todos (JSON)</button>
                    <button class="btn-danger" onclick="limparTodosDados()">ðŸ—‘ï¸ Limpar HistÃ³rico</button>
                </div>
            </div>
        </div>

        <!-- ABA ORÃ‡AMENTO â€“ PLANILHA DE PEÃ‡AS & SERVIÃ‡OS -->
        <div id="orcamento" class="tab-content">
            <div class="content">
                <div class="section-title">ðŸ’° PEÃ‡AS & SERVIÃ‡OS</div>

                <!-- RESUMO FIXO DO VEÃCULO TAMBÃ‰M NA ABA DE PEÃ‡AS -->
                <div class="veiculo-resumo" id="resumoVeiculoOrcamento">
                    <div class="veiculo-resumo-pill">Placa: <strong id="resumoPlaca2">-</strong></div>
                    <div class="veiculo-resumo-pill">Modelo: <strong id="resumoModelo2">-</strong></div>
                    <div class="veiculo-resumo-pill">Chassi: <strong id="resumoChassi2">-</strong></div>
                    <div class="veiculo-resumo-pill">KM Entrada: <strong id="resumoKmEntrada2">-</strong></div>
                    <div class="veiculo-resumo-pill">Complexidade: <strong id="resumoComplexidade">-</strong></div>
                </div>

                <!-- COMPLEXIDADE -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="complexidade">Complexidade do evento</label>
                        <select id="complexidade" name="complexidade">
                            <option value="">Selecione...</option>
                            <option value="pequena monta">Pequena monta</option>
                            <option value="meia monta">Meia monta</option>
                            <option value="grande monta">Grande monta</option>
                        </select>
                    </div>
                </div>

                <!-- FORMULÃRIO TIPO PLANILHA -->
                <div class="form-row two">
                    <div class="form-group">
                        <label for="descricaoItem">PeÃ§a / ServiÃ§o</label>
                        <input type="text" id="descricaoItem" placeholder="Ex: PARACHOQUE DIANTEIRO">
                    </div>
                    <div class="form-group">
                        <label for="valorItem">Valor (R$)</label>
                        <input type="number" id="valorItem" step="0.01" min="0" placeholder="0,00">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <button type="button" class="btn-primary" onclick="adicionarItemManual()">âž• Adicionar linha</button>
                    </div>
                </div>

                <!-- TABELA ESTILO PLANILHA -->
                <div style="margin-top:20px;">
                    <table style="width:100%; border-collapse:collapse; font-size:13px;">
                        <thead>
                            <tr style="background:#f7f7f7;">
                                <th style="border:1px solid #ddd; padding:6px; text-align:left;">PeÃ§a / ServiÃ§o</th>
                                <th style="border:1px solid #ddd; padding:6px; text-align:right;">Valor (R$)</th>
                                <th style="border:1px solid #ddd; padding:6px; text-align:center;">AÃ§Ãµes</th>
                            </tr>
                        </thead>
                        <tbody id="tabelaItens"></tbody>
                        <tfoot>
                            <tr>
                                <td style="border:1px solid #ddd; padding:6px; text-align:right; font-weight:bold;">Total Geral:</td>
                                <td id="totalGeral" style="border:1px solid #ddd; padding:6px; text-align:right; font-weight:bold;">R$ 0,00</td>
                                <td style="border:1px solid #ddd; padding:6px;"></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <div class="action-buttons">
                    <button type="button" class="btn-success" onclick="gerarPDF()">ðŸ“„ Gerar PDF</button>
                </div>
            </div>
        </div>
<!-- ABA FOTOS âœ… PERFEITA -->
<div id="fotos" class="tab-content">
    <div class="content">
        <div class="section-title">ðŸ“¸ FOTOS DO VEÃCULO</div>
        
        <!-- RESUMO VEÃCULO -->
        <div class="veiculo-resumo" id="resumoVeiculoFotos">
            <div class="veiculo-resumo-pill">Placa: <strong id="resumoPlaca3">-</strong></div>
            <div class="veiculo-resumo-pill">Modelo: <strong id="resumoModelo3">-</strong></div>
            <div class="veiculo-resumo-pill">Chassi: <strong id="resumoChassi3">-</strong></div>
            <div class="veiculo-resumo-pill">KM: <strong id="resumoKmFotos">-</strong></div>
        </div>

        <!-- BOTÃ•ES -->
        <div class="form-row">
            <div class="form-group">
                <button type="button" class="btn-primary" onclick="iniciarCamera()">ðŸ“· Tirar Foto</button>
            </div>
            <div class="form-group">
                <input type="file" id="uploadFotos" multiple accept="image/*" onchange="adicionarFotos(event)">
                <label for="uploadFotos" class="btn-secondary" style="cursor:pointer; padding:12px 24px; display:block; text-align:center;">ðŸ“ Galeria</label>
            </div>
        </div>

        <!-- CÃ‚MERA -->
        <div class="camera-container" style="display:none;">
            <video id="cameraPreview" autoplay playsinline style="width:100%; max-width:400px; height:300px; border-radius:12px; border:3px solid #e41616; background:#000;"></video>
            <div style="display:flex; gap:10px; justify-content:center; margin-top:10px;">
                <button class="btn-success btn-small" onclick="tirarFoto()" id="btnTirarFoto" style="display:none;">ðŸ“¸ Capturar</button>
                <button class="btn-secondary btn-small" onclick="pararCamera()">âŒ Cancelar</button>
            </div>
        </div>

        <!-- GALERIA -->
        <div class="section-title">Galeria de Fotos (MÃ¡x 15)</div>
        <div id="galeriaFotos" class="fotos-grid"></div>

        <div class="action-buttons">
            <button type="button" class="btn-success" onclick="gerarPDFFotos()">ðŸ“„ PDF Fotos</button>
            <button type="button" class="btn-danger" onclick="limparFotos()">ðŸ—‘ï¸ Limpar Fotos</button>
        </div>
    </div>
</div>

    </div>

    <script>
function salvarChecklist() {

    const dados = {};

    document.querySelectorAll('input, select, textarea').forEach(el => {

        if (!el.name && !el.id) return;

        const chave = el.name || el.id;

        if (el.type === 'checkbox') {
            dados[chave] = el.checked;
        } else if (el.type === 'radio') {
            if (el.checked) dados[chave] = el.value;
        } else {
            dados[chave] = el.value;
        }
    });

    // peÃ§as adicionadas dinamicamente
    dados.pecas = [];
    document.querySelectorAll('.linha-peca').forEach(linha => {
        const peca = {};
        linha.querySelectorAll('input, select').forEach(campo => {
            peca[campo.name || campo.className] = campo.value;
        });
        dados.pecas.push(peca);
    });

    // fotos
    dados.fotos = [];
    document.querySelectorAll('#previewFotos img').forEach(img => {
        dados.fotos.push(img.src);
    });

    // salvar local
    localStorage.setItem('checklistSalvo', JSON.stringify(dados));

    alert('Checklist salvo com sucesso.');
}

        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.tab-button').forEach(btn => {
                if (btn.getAttribute('onclick').includes(tabId)) btn.classList.add('active');
            });

            if (tabId === 'historico') carregarHistorico();
            if (tabId === 'relatorios') atualizarRelatorios();
            if (tabId === 'orcamento') atualizarResumoVeiculo(); // garante resumo atualizado ao abrir PeÃ§as
        }

        function salvarChecklist() {
            const placa = document.getElementById('placa').value;
            if (!placa) {
                alert("Por favor, preencha pelo menos a PLACA para salvar.");
                return;
            }

            const formData = {};
            const elements = document.getElementById('checklistForm').elements;

            for (let i = 0; i < elements.length; i++) {
                const item = elements[i];
                if (item.name) {
                    if (item.type === 'checkbox') {
                        if (item.checked) {
                            if (!formData[item.name]) formData[item.name] = [];
                            formData[item.name].push(item.value);
                        }
                    } else if (item.type !== 'button') {
                        formData[item.name] = item.value;
                    }
                }
            }

            const checklist = {
                id: Date.now(),
                data_criacao: new Date().toISOString(),
                ...formData
            };

            let checklists = JSON.parse(localStorage.getItem('checklists_fastcar') || '[]');
            checklists.push(checklist);
            localStorage.setItem('checklists_fastcar', JSON.stringify(checklists));

            alert("âœ… Checklist salvo com sucesso no HistÃ³rico!");
            document.getElementById('checklistForm').reset();
            atualizarResumoVeiculo();
            switchTab('historico');
        }

        function carregarHistorico() {
            const listaDiv = document.getElementById('checklistsList');
            const emptyMsg = document.getElementById('emptyMessage');
            const checklists = JSON.parse(localStorage.getItem('checklists_fastcar') || '[]');

            listaDiv.innerHTML = '';

            if (checklists.length === 0) {
                emptyMsg.style.display = 'block';
                return;
            } else {
                emptyMsg.style.display = 'none';
            }

            checklists.slice().reverse().forEach(item => {
                const dataFormatada = new Date(item.data_criacao).toLocaleDateString('pt-BR');
                const horaFormatada = new Date(item.data_criacao).toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});

                const card = document.createElement('div');
                card.className = 'checklist-item';
                card.innerHTML = `
                    <div class="checklist-info">
                        <h4>${(item.placa || '').toUpperCase()} - ${item.modelo || 'Modelo nÃ£o inf.'}</h4>
                        <p>ðŸ“… ${dataFormatada} Ã s ${horaFormatada} | ðŸ‘¤ ${item.nome_cliente || 'Cliente nÃ£o inf.'}</p>
                    </div>
                    <div class="checklist-actions">
                        <button class="btn-small btn-secondary" onclick="carregarChecklist(${item.id})">âœï¸ Editar</button>
                        <button class="btn-small btn-danger" onclick="excluirChecklist(${item.id})">ðŸ—‘ï¸</button>
                    </div>
                `;
                listaDiv.appendChild(card);
            });
        }

        function carregarChecklist(id) {
            const checklists = JSON.parse(localStorage.getItem('checklists_fastcar') || '[]');
            const item = checklists.find(c => c.id === id);

            if (item) {
                switchTab('novo-checklist');

                for (const key in item) {
                    const el = document.getElementsByName(key)[0];
                    if (el && el.type !== 'checkbox' && el.type !== 'file') {
                        el.value = item[key];
                    }
                }

                document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);

                if (item.equipamentos) item.equipamentos.forEach(val => marcarCheckbox('equipamentos', val));
                if (item.caracteristicas) item.caracteristicas.forEach(val => marcarCheckbox('caracteristicas', val));
                if (item.cambio) item.cambio.forEach(val => marcarCheckbox('cambio', val));
                if (item.tracao) item.tracao.forEach(val => marcarCheckbox('tracao', val));

                atualizarResumoVeiculo();
            }
        }

        function marcarCheckbox(name, value) {
            const els = document.getElementsByName(name);
            els.forEach(el => { if (el.value === value) el.checked = true; });
        }

        function excluirChecklist(id) {
            if (confirm("Tem certeza que deseja excluir este checklist?")) {
                let checklists = JSON.parse(localStorage.getItem('checklists_fastcar') || '[]');
                checklists = checklists.filter(c => c.id !== id);
                localStorage.setItem('checklists_fastcar', JSON.stringify(checklists));
                carregarHistorico();
            }
        }

        function filtrarChecklists() {
            const termo = document.getElementById('searchInput').value.toLowerCase();
            const checklists = JSON.parse(localStorage.getItem('checklists_fastcar') || '[]');
            const listaDiv = document.getElementById('checklistsList');
            const emptyMsg = document.getElementById('emptyMessage');

            listaDiv.innerHTML = '';

            const filtrados = checklists.filter(item => {
                const texto = ((item.placa || '') + ' ' + (item.modelo || '') + ' ' + (item.nome_cliente || '')).toLowerCase();
                return texto.includes(termo);
            });

            if (!filtrados.length) {
                emptyMsg.style.display = 'block';
                return;
            } else {
                emptyMsg.style.display = 'none';
            }

            filtrados.slice().reverse().forEach(item => {
                const dataFormatada = new Date(item.data_criacao).toLocaleDateString('pt-BR');
                const horaFormatada = new Date(item.data_criacao).toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});

                const card = document.createElement('div');
                card.className = 'checklist-item';
                card.innerHTML = `
                    <div class="checklist-info">
                        <h4>${(item.placa || '').toUpperCase()} - ${item.modelo || 'Modelo nÃ£o inf.'}</h4>
                        <p>ðŸ“… ${dataFormatada} Ã s ${horaFormatada} | ðŸ‘¤ ${item.nome_cliente || 'Cliente nÃ£o inf.'}</p>
                    </div>
                    <div class="checklist-actions">
                        <button class="btn-small btn-secondary" onclick="carregarChecklist(${item.id})">âœï¸ Editar</button>
                        <button class="btn-small btn-danger" onclick="excluirChecklist(${item.id})">ðŸ—‘ï¸</button>
                    </div>
                `;
                listaDiv.appendChild(card);
            });
        }

        function ordenarChecklists() {
            const checklists = JSON.parse(localStorage.getItem('checklists_fastcar') || '[]');
            checklists.sort((a, b) => {
                const placaA = (a.placa || '').toUpperCase();
                const placaB = (b.placa || '').toUpperCase();
                if (placaA < placaB) return -1;
                if (placaA > placaB) return 1;
                return 0;
            });
            localStorage.setItem('checklists_fastcar', JSON.stringify(checklists));
            carregarHistorico();
        }

        function gerarPDF() {
            const elemento = document.querySelector('.container');

            const originalBodyOverflow = document.body.style.overflow;
            const originalBodyPadding = document.body.style.padding;
            const originalContainerMargin = elemento.style.margin;
            const originalContainerBoxShadow = elemento.style.boxShadow;

            window.scrollTo(0, 0);
            document.body.style.overflow = 'visible';
            document.body.style.padding = '0';
            elemento.style.margin = '0 auto';
            elemento.style.boxShadow = 'none';

            const botoes = document.querySelectorAll('button, .tabs, .header-badge, .action-buttons');
            botoes.forEach(btn => btn.style.display = 'none');

            const opt = {
                margin:       [0, 0, 0, 0],
                filename:     'Checklist-FastCar-' + document.getElementById('placa').value + '.pdf',
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  {
                    scale: 2,
                    useCORS: true,
                    scrollY: 0,
                    windowWidth: document.documentElement.offsetWidth
                },
                jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };

            html2pdf().set(opt).from(elemento).save().then(() => {
                botoes.forEach(btn => btn.style.display = '');
                document.querySelector('.tabs').style.display = 'flex';
                document.querySelector('.header-badge').style.display = 'block';
                document.querySelectorAll('.action-buttons').forEach(ab => ab.style.display = 'flex');

                document.body.style.overflow = originalBodyOverflow;
                document.body.style.padding = originalBodyPadding;
                elemento.style.margin = originalContainerMargin;
                elemento.style.boxShadow = originalContainerBoxShadow;
            }).catch(err => {
                console.error(err);
                alert("Erro ao gerar PDF.");
                botoes.forEach(btn => btn.style.display = '');
                document.querySelector('.tabs').style.display = 'flex';
                document.querySelector('.header-badge').style.display = 'block';
                document.querySelectorAll('.action-buttons').forEach(ab => ab.style.display = 'flex');
                document.body.style.overflow = originalBodyOverflow;
                document.body.style.padding = originalBodyPadding;
            });
        }

        function limparFormulario() {
            if (confirm("Limpar todos os campos do formulÃ¡rio?")) {
                document.getElementById('checklistForm').reset();
                atualizarResumoVeiculo();
            }
        }

        function exportarDados() {
            const db = JSON.parse(localStorage.getItem('checklists_fastcar') || '[]');
            if (!db.length) {
                alert("NÃ£o hÃ¡ dados para exportar.");
                return;
            }
            const blob = new Blob([JSON.stringify(db, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'checklists_fastcar.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function limparTodosDados() {
            if (confirm("Deseja apagar TODO o histÃ³rico?")) {
                localStorage.removeItem('checklists_fastcar');
                carregarHistorico();
                alert("HistÃ³rico limpo.");
            }
        }

        function atualizarRelatorios() {
            const db = JSON.parse(localStorage.getItem('checklists_fastcar') || '[]');

            document.getElementById('totalChecklists').textContent = db.length;

            const hoje = new Date();
            const mesAtual = hoje.getMonth();
            const anoAtual = hoje.getFullYear();

            const doMes = db.filter(item => {
                if (!item.data_criacao) return false;
                const dataItem = new Date(item.data_criacao);
                return dataItem.getMonth() === mesAtual && dataItem.getFullYear() === anoAtual;
            });
            document.getElementById('checklistsMes').textContent = doMes.length;

            const marcas = {};
            db.forEach(item => {
                const modeloTexto = item.modelo || 'NÃ£o Informado';
                const m = modeloTexto.split(' ')[0].toUpperCase();
                marcas[m] = (marcas[m] || 0) + 1;
            });

            const sortedMarcas = Object.entries(marcas).sort((a,b) => b[1] - a[1]).slice(0, 5);
            let htmlGrafico = '';
            sortedMarcas.forEach(([marca, qtd]) => {
                const pct = (qtd / db.length) * 100;
                htmlGrafico += `
                    <div style="margin-bottom: 10px;">
                        <div style="display:flex; justify-content:space-between; font-size:12px; margin-bottom:2px;">
                            <strong>${marca}</strong>
                            <span>${qtd}</span>
                        </div>
                        <div style="background:#eee; height:8px; border-radius:4px; overflow:hidden;">
                            <div style="background:var(--color-primary); width:${pct}%; height:100%;"></div>
                        </div>
                    </div>
                `;
            });

            if (!sortedMarcas.length) {
                htmlGrafico = '<p style="text-align:center; color:#999; font-size:12px;">Sem dados suficientes.</p>';
            }

            document.getElementById('graficoMarcas').innerHTML = htmlGrafico;
        }

        // ORÃ‡AMENTO â€“ PEÃ‡AS & SERVIÃ‡OS (planilha simples)
        let itensOrcamento = [];

        function adicionarItemManual() {
            const descricaoInput = document.getElementById('descricaoItem');
            const valorInput = document.getElementById('valorItem');

            const descricao = descricaoInput.value.trim();
            const valor = parseFloat(valorInput.value || '0');

            if (!descricao) {
                alert('Informe a peÃ§a/serviÃ§o.');
                descricaoInput.focus();
                return;
            }
            if (isNaN(valor) || valor < 0) {
                alert('Informe um valor vÃ¡lido.');
                valorInput.focus();
                return;
            }

            const item = {
                id: Date.now(),
                descricao,
                valor
            };

            itensOrcamento.push(item);
            renderizarTabela();
            descricaoInput.value = '';
            valorInput.value = '';
            descricaoInput.focus();
        }

        function removerItem(id) {
            itensOrcamento = itensOrcamento.filter(i => i.id !== id);
            renderizarTabela();
        }

        function renderizarTabela() {
            const tbody = document.getElementById('tabelaItens');
            const totalSpan = document.getElementById('totalGeral');
            tbody.innerHTML = '';

            let totalGeral = 0;
            itensOrcamento.forEach(item => {
                totalGeral += item.valor;
                const tr = document.createElement('tr');
                tr.innerHTML = `
                  <td style="border:1px solid #ddd; padding:6px;">${item.descricao}</td>
                  <td style="border:1px solid #ddd; padding:6px; text-align:right;">R$ ${item.valor.toFixed(2)}</td>
                  <td style="border:1px solid #ddd; padding:6px; text-align:center;">
                    <button class="btn-small btn-danger" onclick="removerItem(${item.id})">ðŸ—‘ï¸</button>
                  </td>
                `;
                tbody.appendChild(tr);
            });

            totalGeral = isNaN(totalGeral) ? 0 : totalGeral;
            totalSpan.textContent = 'R$ ' + totalGeral.toFixed(2);
        }

        // ENTER nos campos de PeÃ§as & ServiÃ§os adiciona linha
        document.addEventListener('DOMContentLoaded', () => {
            carregarHistorico();
            atualizarResumoVeiculo();

            const descricaoItem = document.getElementById('descricaoItem');
            const valorItem = document.getElementById('valorItem');

            descricaoItem.addEventListener('keydown', function (event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    adicionarItemManual();
                }
            });

            valorItem.addEventListener('keydown', function (event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    adicionarItemManual();
                }
            });

            const camposResumo = ['placa','modelo','chassi','km_entrada','data','hora','combustivel','complexidade'];
            camposResumo.forEach(id => {
                const el = document.getElementById(id);
                if (!el) return;
                const tipo = (el.tagName === 'SELECT' || el.type === 'date' || el.type === 'time') ? 'change' : 'input';
                el.addEventListener(tipo, atualizarResumoVeiculo);
            });
        });

        function atualizarResumoVeiculo() {
            const placa = document.getElementById('placa').value || '-';
            const modelo = document.getElementById('modelo').value || '-';
            const chassi = document.getElementById('chassi').value || '-';
            const kmEntrada = document.getElementById('km_entrada').value || '-';
            const data = document.getElementById('data').value || '-';
            const hora = document.getElementById('hora').value || '-';
            const combustivel = document.getElementById('combustivel').value || '-';
            const complexidade = document.getElementById('complexidade').value || '-';

            document.getElementById('resumoPlaca').textContent = placa;
            document.getElementById('resumoModelo').textContent = modelo;
            document.getElementById('resumoChassi').textContent = chassi;
            document.getElementById('resumoKmEntrada').textContent = kmEntrada;
            document.getElementById('resumoData').textContent = data;
            document.getElementById('resumoHora').textContent = hora;
            document.getElementById('resumoCombustivel').textContent = combustivel;

            document.getElementById('resumoPlaca2').textContent = placa;
            document.getElementById('resumoModelo2').textContent = modelo;
            document.getElementById('resumoChassi2').textContent = chassi;
            document.getElementById('resumoKmEntrada2').textContent = kmEntrada;
            document.getElementById('resumoComplexidade').textContent = complexidade || '-';
// FOTOS
const resumoPlaca3 = document.getElementById('resumoPlaca3');
const resumoModelo3 = document.getElementById('resumoModelo3');
const resumoChassi3 = document.getElementById('resumoChassi3');
const resumoKmFotos = document.getElementById('resumoKmFotos');
if (resumoPlaca3) resumoPlaca3.textContent = placa;
if (resumoModelo3) resumoModelo3.textContent = modelo;
if (resumoChassi3) resumoChassi3.textContent = chassi;
if (resumoKmFotos) resumoKmFotos.textContent = kmEntrada;

        }
// ========================================
// FOTOS - 100% FUNCIONAL
// ========================================
let streamCamera = null;
let fotosVeiculo = JSON.parse(localStorage.getItem('fotosVeiculo') || '[]');

function iniciarCamera() {
    const video = document.getElementById('cameraPreview');
    const btnTirar = document.getElementById('btnTirarFoto');
    const container = document.querySelector('.camera-container');
    
    navigator.mediaDevices.getUserMedia({ 
        video: { facingMode: 'environment', width: { ideal: 1280 }, height: { ideal: 720 } }
    }).then(stream => {
        streamCamera = stream;
        video.srcObject = stream;
        container.style.display = 'block';
        btnTirar.style.display = 'inline-block';
        video.play();
    }).catch(err => {
        alert('Erro cÃ¢mera: ' + err.message + '\nUse "Galeria"');
    });
}

function tirarFoto() {
    const video = document.getElementById('cameraPreview');
    const canvas = document.createElement('canvas');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    canvas.getContext('2d').drawImage(video, 0, 0);
    
    const foto = {
        id: Date.now(),
        dataURL: canvas.toDataURL('image/jpeg', 0.8),
        data: new Date().toLocaleString('pt-BR')
    };
    
    fotosVeiculo.unshift(foto);
    if (fotosVeiculo.length > 15) fotosVeiculo = fotosVeiculo.slice(0, 15);
    localStorage.setItem('fotosVeiculo', JSON.stringify(fotosVeiculo));
    renderizarGaleria();
    pararCamera();
}

function pararCamera() {
    if (streamCamera) {
        streamCamera.getTracks().forEach(track => track.stop());
        streamCamera = null;
    }
    document.querySelector('.camera-container').style.display = 'none';
    document.getElementById('btnTirarFoto').style.display = 'none';
}

function adicionarFotos(event) {
    const files = Array.from(event.target.files);
    files.forEach(file => {
        const reader = new FileReader();
        reader.onload = e => {
            fotosVeiculo.unshift({
                id: Date.now() + Math.random(),
                dataURL: e.target.result,
                data: new Date().toLocaleString('pt-BR')
            });
            if (fotosVeiculo.length > 15) fotosVeiculo = fotosVeiculo.slice(0, 15);
            localStorage.setItem('fotosVeiculo', JSON.stringify(fotosVeiculo));
            renderizarGaleria();
        };
        reader.readAsDataURL(file);
    });
    event.target.value = '';
}

function renderizarGaleria() {
    const galeria = document.getElementById('galeriaFotos');
    if (!galeria) return;
    galeria.innerHTML = '';
    
    if (fotosVeiculo.length === 0) {
        galeria.innerHTML = '<p style="text-align:center;color:#999;padding:40px">ðŸ“­ Nenhuma foto</p>';
        return;
    }
    
    fotosVeiculo.slice(0, 15).forEach((foto, index) => {
        const div = document.createElement('div');
        div.className = 'foto-item';
        div.innerHTML = `
            <img src="${foto.dataURL}" alt="Foto ${index + 1}" loading="lazy">
            <div class="foto-overlay"><span style="color:white;font-size:11px">${foto.data}</span></div>
            <div class="foto-actions">
                <button class="btn-foto btn-warning foto-zoom" data-url="${foto.dataURL}">ðŸ”</button>
                <button class="btn-foto btn-danger foto-delete" data-id="${foto.id}">ðŸ—‘ï¸</button>
            </div>
        `;
        galeria.appendChild(div);
    });
    
    // EVENTOS DELEGADOS
    galeria.querySelectorAll('.foto-zoom').forEach(btn => {
        btn.addEventListener('click', () => abrirFotoGrande(btn.dataset.url));
    });
    galeria.querySelectorAll('.foto-delete').forEach(btn => {
        btn.addEventListener('click', () => removerFoto(parseInt(btn.dataset.id)));
    });
}

function removerFoto(id) {
    fotosVeiculo = fotosVeiculo.filter(f => f.id !== id);
    localStorage.setItem('fotosVeiculo', JSON.stringify(fotosVeiculo));
    renderizarGaleria();
    mostrarAlerta('success', 'âœ… Foto removida!');
}

function limparFotos() {
    if (confirm('ðŸ—‘ï¸ Limpar TODAS as fotos?')) {
        fotosVeiculo = [];
        localStorage.removeItem('fotosVeiculo');
        renderizarGaleria();
        mostrarAlerta('success', 'âœ… Fotos limpas!');
    }
}

function abrirFotoGrande(dataURL) {
    const modal = document.createElement('div');
    modal.style.cssText = `
        position:fixed; top:0; left:0; width:100vw; height:100vh; 
        background:rgba(0,0,0,0.95); z-index:9999; display:flex; 
        align-items:center; justify-content:center; padding:20px;
    `;
    modal.innerHTML = `
        <img src="${dataURL}" style="max-width:95%; max-height:95%; border-radius:8px; box-shadow:0 0 50px rgba(255,255,255,0.3);">
        <button onclick="this.parentElement.remove()" style="
            position:absolute; top:20px; right:20px; background:#e41616; 
            color:white; border:none; border-radius:50%; width:50px; 
            height:50px; font-size:20px; cursor:pointer;
        ">âœ•</button>
    `;
    document.body.appendChild(modal);
    modal.onclick = (e) => { if (e.target === modal) modal.remove(); };
}

function gerarPDFFotos() {
    if (!fotosVeiculo || fotosVeiculo.length === 0) {
        alert('ðŸ“­ Sem fotos para gerar PDF');
        return;
    }

    const placa  = document.getElementById('placa')?.value  || 'SEM_PLACA';
    const modelo = document.getElementById('modelo')?.value || 'SEM_MODELO';
    const chassi = document.getElementById('chassi')?.value || 'SEM_CHASSI';

    const MAXFOTOS = 16;
    const fotosUsar = fotosVeiculo.slice(0, MAXFOTOS);

    let html = '';

    // Cada grupo de 4 fotos = 1 pÃ¡gina (2x2)
    for (let i = 0; i < fotosUsar.length; i += 4) {
        const isLastGroup = i + 4 >= fotosUsar.length;

        html += `
            <div style="
                width: 100%;
                min-height: 100vh;
                box-sizing: border-box;
                padding: 20px;
                font-family: Arial, sans-serif;
                ${isLastGroup ? '' : 'page-break-after: always;'}
            ">
                <!-- CABEÃ‡ALHO COM DADOS DO CARRO -->
                <div style="
                    background: #f5f5f5;
                    border: 2px solid #e41616;
                    border-radius: 6px;
                    padding: 10px 15px;
                    margin-bottom: 15px;
                    font-size: 11px;
                    line-height: 1.5;
                ">
                    <div style="font-weight: bold; color: #e41616; font-size: 12px; margin-bottom: 5px;">FAST CAR - INSPEÃ‡ÃƒO DE FOTOS</div>
                    <div><strong>Placa:</strong> ${placa}</div>
                    <div><strong>Modelo:</strong> ${modelo}</div>
                    <div><strong>Chassi:</strong> ${chassi}</div>
                </div>

                <!-- GRADE DE 4 FOTOS 2x2 -->
                <div style="
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 15px;
                ">
        `;

        for (let j = 0; j < 4 && (i + j) < fotosUsar.length; j++) {
            const foto = fotosUsar[i + j];
            const num = i + j + 1;

            html += `
                <div style="text-align: center;">
                    <img src="${foto.dataURL}"
                         style="
                             width: 100%;
                             max-width: 260px;
                             max-height: 260px;
                             height: auto;
                             border-radius: 6px;
                             border: 1px solid #e41616;
                         ">
                    <div style="
                        font-size: 9px;
                        margin-top: 5px;
                        color: #555;
                    ">
                        Foto ${num} - ${foto.data || ''}
                    </div>
                </div>
            `;
        }

        html += `
                </div>
            </div>
        `;
    }

    html2pdf().set({
        filename: `Fotos-${placa}.pdf`,
        margin: 0,
        image: { type: 'jpeg', quality: 0.9 },
        html2canvas: {
            scale: 2,
            useCORS: true,
            scrollY: 0
        },
        jsPDF: {
            format: 'a4',
            orientation: 'portrait',
            unit: 'pt'
        }
    }).from(html).save();

    mostrarAlerta('success', `âœ… PDF gerado com ${fotosUsar.length} fotos (mÃ¡ximo 16)`);
}

// INICIALIZAR FOTOS
document.addEventListener('DOMContentLoaded', () => {
    renderizarGaleria();
});

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:application/javascript;base64,CmNvbnN0IENBQ0hFX05BTUUgPSAnY2hlY2tsaXN0LXYzLWNhY2hlJzsKY29uc3QgVVJMU19UT19DQUNIRSA9IFsKICAnLycsCiAgJy9pbmRleC5odG1sJwpdOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgKGV2ZW50KSA9PiB7CiAgY29uc3QgY2FjaGVPcGVuID0gY2FjaGVzLm9wZW4oQ0FDSEVfTkFNRSkudGhlbigY2xpZW50KSA9PiB7CiAgICByZXR1cm4gY2xpZW50LmFkZEFsbChVUkxzX1RPX0NBQ0hFKTsKICB9KTsKICBldmVudC53YWl0VW50aWwoKGNhY2hlT3Blbik7Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdmZXRjaCcsIChldmVudCkgPT4gewogIGV2ZW50LnJlc3BvbmRXaXRoKAogICAgY2FjaGVzLm1hdGNoKGV2ZW50LnJlcXVlc3QpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgIGlmIChyZXNwb25zZSkgewogICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgfQogICAgICByZXR1cm4gZmV0Y2goZXZlbnQucmVxdWVzdCk7CiAgICB9KQogICk7Cn0pOwo=');
        }
    </script>
<button id="btnSalvarChecklist" onclick="salvarChecklist()">
    ðŸ’¾ Salvar Checklist
</button>
<script src="config.js"></script>
<script>
// APLICA CONFIG DA OFICINA AUTOMATICAMENTE
window.addEventListener('load', function() {
    if (window.OFICINA_CONFIG) {
        // Nome da oficina
        document.getElementById('nome-oficina').textContent = window.OFICINA_CONFIG.nome;
        document.getElementById('titulo-pagina').textContent = window.OFICINA_CONFIG.nome + ' - Checklist';
        document.title = window.OFICINA_CONFIG.nome + ' - Checklist';
        
        // SubtÃ­tulo
        if (window.OFICINA_CONFIG.subtitulo) {
            document.getElementById('subtitulo-oficina').textContent = window.OFICINA_CONFIG.subtitulo;
        }
        
        // EndereÃ§o
        if (window.OFICINA_CONFIG.endereco) {
            document.getElementById('endereco-oficina').textContent = window.OFICINA_CONFIG.endereco;
        }
        
        // Telefone
        if (window.OFICINA_CONFIG.telefone) {
            document.getElementById('telefone-oficina').textContent = window.OFICINA_CONFIG.telefone;
        }
        
        // Logo
        if (window.OFICINA_CONFIG.logo) {
            document.getElementById('logo-oficina').src = window.OFICINA_CONFIG.logo;
        }
        
        // CORES DA LOGO VOLPINI
        if (window.OFICINA_CONFIG.corPrimaria) {
            document.documentElement.style.setProperty('--color-primary', window.OFICINA_CONFIG.corPrimaria);
        }
    }
});
</script>

</body>
</html>

</body>
</html>
